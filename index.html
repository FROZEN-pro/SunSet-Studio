<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SunSet Studio - Telegram Mini App</title>
    <style>
        /* Oldingi stillar o'zgarishsiz qoladi */
 :root {
            --main-bg-color: #f8f9fa;
            --secondary-bg-color: #ffffff;
            --text-color: #333;
            --secondary-text-color: #666;
            --accent-color: #FF6B35;
        }

        [data-theme='dark'] {
            --main-bg-color: #333;
            --secondary-bg-color: #424242;
            --text-color: #eee;
            --secondary-text-color: #ccc;
            --accent-color: #D35400;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            color: var(--text-color);
            background-color: var(--main-bg-color);
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        .glass {
            /* Shisha effekt */
            background: rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Login Screen */
        .login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            /* Orqa fon GIF */
            background: url('https://i.ibb.co/R4c4RfYR/gif.gif') center/cover no-repeat;
            background-size: cover;
            background-position: center;
        }

        .login-container {
            background: rgba(255, 255, 255, 0.5);
            /* Transparentlikni 50% ga o'zgartirish */
            padding: 50px 40px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            text-align: center;
            min-width: 320px;
            backdrop-filter: blur(10px);
            transition: background-color 0.3s, color 0.3s;
        }

        .logo-text {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 40px;
            letter-spacing: 2px;
        }

        .login-input {
            width: 100%;
            padding: 18px 20px;
            margin-bottom: 25px;
            border: 2px solid #E0E0E0;
            border-radius: 15px;
            font-size: 16px;
            background: #FAFAFA;
            color: #333;
            /* Dark mode da ham qora rangda yozish */
            transition: all 0.3s;
        }

        .login-input:focus {
            outline: none;
            border-color: #FF6B35;
            background: white;
            transform: translateY(-2px);
        }

        .login-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 107, 53, 0.4);
        }

        .login-btn:active {
            transform: translateY(-1px);
        }

        /* Main App Container */
        .app-container {
            display: none;
            max-width: 420px;
            margin: 0 auto;
            background: #F8F9FA;
            min-height: 100vh;
            position: relative;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Header Logo Image */
        .header-logo img {
            width: 50px;
            /* Icon o'lchamini sozlash */
            height: 50px;
            border-radius: 50%;
            /* Dumaloq qilish */
            margin-right: 10px;
            object-fit: cover;
            /* Rasmning to'g'ri ko'rinishi */
        }

        .search-container {
            flex: 1;
            position: relative;
            margin-right: 15px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            color: #333;
            transition: background-color 0.2s, color 0.2s;
        }

        .search-input::placeholder {
            color: #666;
        }

        .announcements-btn {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
        }

        .announcements-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: white;
            padding: 0 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s, color 0.3s;
        }

        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 20px 15px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-tab.active {
            color: #FF6B35;
            border-bottom-color: #FF6B35;
        }

        /* Section Navigation */
        .section-nav {
            display: flex;
            margin: 20px;
            background: white;
            border-radius: 25px;
            padding: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: background-color 0.3s, color 0.3s;
        }

        .section-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .section-tab.active {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            transform: scale(1.02);
        }

        /* Content Grid */
        .content-section {
            padding: 0 20px 100px;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            opacity: 1;
            transform: translateX(0);
            transition: all 0.4s ease;
        }

        .content-grid.slide-out {
            opacity: 0;
            transform: translateX(-30px);
        }

        .content-grid.slide-in {
            opacity: 0;
            transform: translateX(30px);
        }

        .content-item {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .content-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

         /* Content Image */
        .content-image {
            width: 100%;
            height: 0; /* Balandlikni 0 ga o'rnatish */
            padding-bottom: 133.33%; /* 3:4 nisbat */
            position: relative;
            overflow: hidden;
        }

        .content-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Rasmning to'g'ri ko'rinishi */
        }

        .content-info {
            padding: 6px;
        }

        .content-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 10px; /* Masofani kamaytirish (40%) */
            color: #333;
            line-height: 1.4;
            height: 40px;
            overflow: hidden;
            transition: color 0.3s;
        }

        .content-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #666;
            margin-top: -15px; /* Masofani kamaytirish (40%) */
        }

        .content-rating {
            color: #FF6B35;
            font-weight: 700;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 420px;
            height: 70px; /* Taxminiy balandlik */
            background: white;
            display: flex;
            justify-content: space-around; /* Elementlarni teng taqsimlaydi */
            align-items: center; /* Vertikal markazlashtiradi */
            padding: 5px 0; /* Yuqori va pastki padding kamaytirildi */
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
            border-radius: 25px 25px 0 0;
            transition: background-color 0.3s, color 0.3s;
        }

        .bottom-nav-item {
            flex: 1;
            text-align: center;
            padding: 5px; /* Padding ham kamaytirildi */
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            color: #666;
            font-size: 12px;
            font-weight: 600;
        }

        .bottom-nav-item.active {
            color: #FF6B35;
            transform: scale(1.1);
        }

        .bottom-nav-item .icon {
            font-size: 22px; /* Ikon o'lchamini kichraytirish mumkin */
            margin-bottom: 2px;
            display: block;
        }

        /* Page Sections */
        .page-section {
            display: none;
            min-height: calc(100vh - 200px);
        }

        .page-section.active {
            display: block;
        }

        /* Favourites Page */
        .page-header {
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            color: #FF6B35;
            padding: 30px 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Profile Page */
        .profile-section {
            padding: 20px;
        }

        .profile-header {
            text-align: center;
            padding: 30px 0;
            margin-top: -100px; /* Yuqori bo'sh joyni kamaytirish */
        }

        .profile-logo {
             /* Ilova Icon rasmi */
            width: 150px; /* Icon o'lchamini sozlash */
            height: 150px;
            border-radius: 50%; /* Dumaloq qilish */
            margin-bottom: 10px;
            object-fit: cover; /* Rasmning to'g'ri ko'rinishi */
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 30px;
            transition: color 0.3s;
        }

        .profile-menu {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, color 0.3s;
        }

        .profile-menu-item {
            display: flex;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .profile-menu-item:last-child {
            border-bottom: none;
        }

        .profile-menu-item:hover {
            color: #FF6B35;
            transform: translateX(10px);
        }

        .profile-menu-item .icon {
            font-size: 20px;
            margin-right: 15px;
            width: 25px;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 380px;
            max-height: 80%;
            background: white;
            border-radius: 25px;
            padding: 30px;
            overflow-y: auto;
            transition: background-color 0.3s, color 0.3s; /* Qora rejimga moslash uchun transition */
        }

        .modal-header {
            text-align: center;
            font-size: 20px;
            font-weight: 700;
            color: #FF6B35;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .announcement-item {
            background: #F8F9FA;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #FF6B35;
            transition: background-color 0.2s, color 0.2s;
        }

        .announcement-title {
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
            transition: color 0.3s;
        }

        .announcement-text {
            color: #666;
            line-height: 1.5;
            font-size: 14px;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
        }

        @media (max-width: 480px) {
            .content-image {
                height: 180px;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
        }
        /* Qo'shimcha stillar */
        .content-details {
            display: none;
            padding: 20px;
            background: #fff;
            border-radius: 20px;
            margin-top: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .content-details.active {
            display: block;
        }

        .youtube-player {
            width: 100%;
            height: 300px; /* Balandlikni sozlash */
            background: #000; /* Player uchun fon rangi */
            margin-bottom: 15px;
        }

        .like-icon {
            cursor: pointer;
            font-size: 28px;
            transition: color 0.3s;
        }

        /* Xabar uchun stil */
        #notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1001;
            display: none;
        }

        /* Kontent tafsilotlari uchun qo'shimcha stillar */
        .content-details-info {
            margin-bottom: 10px;
            font-size: 14px;
            color: #666;
            text-align: center; /* Yil va reytingni markazga joylash */
            transition: color 0.2s;
        }

        .content-details-genre {
            font-style: italic;
            color: #999;
            transition: color 0.2s;
        }

        /* Tugmalar uchun stil */
        .content-buttons {
            display: flex;
            align-items: center;
            justify-content: space-between; /* Tugmalarni teng taqsimlash */
            margin-top: 15px;
        }

        .content-buttons .like-icon {
            margin-right: auto; /* Like tugmasini chap tomonga surish */
        }

        .content-buttons button {
            padding: 15px 20px;
            background-color: #FF6B35;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold; /* "Watch" matnini qalin qilish */
            width: 85%; /* Enini 1.5x qilish */
        }

        /* Dark mode switch stillari */
        .dark-mode-container {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 10px 20px;
            transition: color 0.3s, background-color 0.3s;
        }

        .dark-mode-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 10px;
            font-size: 12px;
            color: #666;
        }

        .dark-mode-switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }

        .dark-mode-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #2196F3;
        }

        input:focus + .slider {
            box-shadow: 0 0 1px #2196F3;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        /* Dark mode container ichidagi elementlar uchun transition */
        .dark-mode-container *, .dark-mode-container::before, .dark-mode-container::after {
            transition: color 0.3s, background-color 0.3s;
        }

        /* Vertikal matn uchun */
        .vertical-text {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            white-space: nowrap;
        }

    </style>

   <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

 Telegram Mini App ishga tushirildi! 

 

        <!-- Login Screen -->
    
        
            
            
            KIRISH
        
    

    <!-- Main App -->
    
        <!-- Header - Main Page da ko'rinadi -->
        
            
              
            
            
        
        <!-- Main Content Page -->
        
            <!-- Navigation Tabs -->
            
                
                    MULTFILM
                
                
                    ANIME
                
            

            <!-- Content Sections -->
            
                <!-- Section Navigation -->
                
                    
                        Hozir Trendda
                    
                    
                        Yangi Qo'shildi
                    
                

                <!-- Content Grid -->
                

                
            
        

        <!-- Favourites Page -->
        
            FAVOURITES
            
                
                    <!-- Favourites content -->
                
            
        

        <!-- Profile Page -->
        
            
                 Dark Mode Switch
                
                    
                         Dark
                         Mode
                    
                    
                        
                            
                        
                    
                

                
                    
                    Foydalanuvchi
                
                
                    
                         ❤️
                        FAVOURITES
                    
                    
                         📢
                        ANNOUNCEMENTS
                    
                    
                         🌐
                        SOCIAL PAGES
                    
                    
                         🛠️
                        SUPPORT
                    
                    
                         🚪
                        LOG OUT
                    
                
            
        

        <!-- Bottom Navigation -->
        

            
                🏠
                MAIN MENU
            

            
                ❤️
                FAVOURITES
            

            
                👤
                PROFILE
            
        
    

    <!-- Content Details Modal -->
    
        
            
            
            
                

              
                Ta'rif
                

                
                    
                     🖤
                    
                    <strong>Watch</strong>
                
            
        
    

    <!-- Modals -->
    
        
            
            
            

            
                
                    Yangi Seriya!
                

                
                    KPop Demon Hunters yangi seriyasi chiqdi! Rumi, Mira va Zoey ning yangi sarguzashtlarini kuzating.
                
            

            
                
                    Yangilanish
                

                
                    Ilovamizga yangi funksiyalar qo'shildi. Endi siz sevimli kontentlaringizni saqlashingiz mumkin!
                
            
        
    

    
        
            
            
            

            
                
                    TELEGRAM KANALIMIZ
                
                
                    TELEGRAM GURUHIMIZ
                
                
                    YOUTUBE KANALIMIZ
                
                
                    BOSHQA KONTENTIMIZ
                
                
                    SOCIAL MEDIA IDEAS
                
            
        
    

    
        
            
            
            

            
                
                    ADMIN BILAN BOG'LANISH
                
                
                    SPAM BO'LGANLAR UCHUN
                
                
                    SHUNDAY WEB3 APP KERAK
                
                
                    @rapunziey
                
            
        
    

    <!-- Notification -->
    

    <script>
        // API kalitini shu yerga joylashtiring
        const imgbbApiKey = 'ad433e82aae872eebbb30c5bfe3fac42';

        // Telegram WebApp object
        const tg = window.Telegram.WebApp;
        tg.ready()

        // Set data
        tg.data = {
            user: tg.initDataUnsafe.user,
            theme: tg.themeParams
        };

        // Change the theme
        tg.themeData = function() {
            const {themeParams} = this;
            document.body.style.backgroundColor = themeParams.bg_color;
        };

        tg.themeData()

        // Sample data
        const contentData = {
            multfilm: {
                trending: [{
                    id: 1,
                    title: "Kpop demon hunters",
                    year: "2025",
                    rating: "9.2",
                    description: "Kpop Demon Hunters haqida qiziqarli multfilm.",
                    videoUrl: "https://youtu.be/OwpgvSo_G0g?si=MYnBD8XtwQib1hLm",
                    genres: ["Action", "Comedy"],
                    imageUrl: "https://i.ibb.co/cS4Bq8b/Kpop-Demon-Hunters.jpg"
                }, {
                    id: 2,
                    title: "Super Hero Squad",
                    year: "2024",
                    rating: "8.8",
                    description: "Super qahramonlar jamoasi sarguzashtlari.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Adventure", "Family"],
                    imageUrl: "https://i.ibb.co/h1BBhdh5/App-icon-for-Sun-Set.png"
                }, ],
                new: [{
                    id: 7,
                    title: "New Adventure",
                    year: "2025",
                    rating: "8.6",
                    description: "Yangi sarguzashtlar olami.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Fantasy", "Sci-Fi"],
                    imageUrl: "YOUR_CONTENT_IMAGE_URL"
                }, {
                    id: 8,
                    title: "Magic Quest",
                    year: "2025",
                    rating: "8.4",
                    description: "Sehrli qidiruvlar.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Adventure", "Fantasy"],
                    imageUrl: "YOUR_CONTENT_IMAGE_URL"
                }, ]
            },
            anime: {
                trending: [{
                    id: 11,
                    title: "Kpop demon hunters",
                    year: "2025",
                    rating: "9.2",
                    description: "Kpop Demon Hunters haqida anime versiyasi.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Action", "Fantasy"],
                    imageUrl: "https://i.ibb.co/cS4Bq8b/Kpop-Demon-Hunters.jpg"
                }, {
                    id: 12,
                    title: "Ninja Academy",
                    year: "2024",
                    rating: 9.1,
                    description: "Ninja akademiyasi o'quvchilari.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Action", "Adventure"],
                    imageUrl: "https://i.ibb.co/h1BBhdh5/App-icon-for-Sun-Set.png"
                }, ],
                new: [{
                    id: 17,
                    title: "New Samurai",
                    year: "2025",
                    rating: 9.0,
                    description: "Yangi samuray sarguzashtlari.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Action", "Drama"],
                    imageUrl: "YOUR_CONTENT_IMAGE_URL"
                }, {
                    id: 18,
                    title: "Dragon Academy",
                    year: "2025",
                    rating: 8.8,
                    description: "Ajdarho akademiyasi o'quvchilari.",
                    videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                    genres: ["Fantasy", "Adventure"],
                    imageUrl: "YOUR_CONTENT_IMAGE_URL"
                }, ]
            }
        };

        // Global variables
        let currentMainTab = 'multfilm';
        let currentSection = 'trending';
        let allContent = []; // Barcha kontentlar uchun massiv
        let favourites = localStorage.getItem('favourites');
        favourites = favourites ? JSON.parse(favourites) : [];// Sevimlilar ro'yxati
        let currentContent = null; // Hozirgi kontent
        let darkMode = localStorage.getItem('darkMode') === 'enabled'; // Qora rejim holati

        // Initialize when page loads
        window.onload = function () {
            checkLogin();
            loadAllContent();
            loadContent(); // Boshlang'ich kontentni yuklash

            // Boshlang'ich holat: main sahifa
            showPage('main');
            // Telegram WebApp tayyorligini tekshirish
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                tg.ready();
                 // Telegram ranglarini qo'llash
                document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#f8f9fa');
                document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#333');
                document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color || '#666');
                document.documentElement.style.setProperty('--tg-theme-link-color', tg.themeParams.link_color || '#FF6B35');
                document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color || '#FF6B35');
                document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color || '#fff');
            }

            // Qora rejimni tekshirish va o'rnatish
            if (darkMode) {
                document.body.setAttribute('data-theme', 'dark');
                document.getElementById('darkModeSwitch').checked = true;
            }
            const darkModeSwitch = document.getElementById('darkModeSwitch');
            darkModeSwitch.addEventListener('change', function () {
                darkMode = this.checked;
                toggleDarkMode();
            });
            // Icon yuklash
            loadAppIcon();
        };

        // Handle login
        function handleLogin() {
            const nameInput = document.getElementById('nameInput');
            const name = nameInput.value.trim();

            if (name.length === 0) {
                alert('Iltimos, ismingizni kiriting!');
                nameInput.focus();
                return;
            }

            if (name.length < 2) {
                alert('Ism kamida 2 ta belgidan iborat bo\'lishi kerak!');
                nameInput.focus();
                return;
            }

            // Save user data
            localStorage.setItem('userName', name);

            // Update profile name
            document.getElementById('profileName').textContent = name;

            // Hide login screen and show app
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';

            // Load initial content
            loadContent();
        }

        // Check if user is already logged in
        function checkLogin() {
            const savedName = localStorage.getItem('userName');
            if (savedName && savedName.trim().length > 0) {
                document.getElementById('profileName').textContent = savedName;
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                showPage('main');
                loadContent();
            }
        }

        // Switch main tabs
        function switchMainTab(tab, element) {
            // Update tab appearance
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');

            currentMainTab = tab;
            loadContent();
        }

        // Switch section tabs
        function switchSectionTab(section, element) {
            // Update tab appearance
            document.querySelectorAll('.section-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');

            // Animate content change
            const grid = document.getElementById('contentGrid');
            grid.classList.add('slide-out');

            setTimeout(() => {
                currentSection = section;
                loadContent();
                grid.classList.remove('slide-out');
            }, 200);
        }

        // Show page
        function showPage(page) {
            // Headerni ko'rsatish/yashirish
            const mainHeader = document.getElementById('mainHeader');
            if (page === 'main') {
                mainHeader.style.display = 'flex';
            } else {
                mainHeader.style.display = 'none';
            }

            // Update bottom nav
            document.querySelectorAll('.bottom-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            if (page === 'main') {
                document.querySelectorAll('.bottom-nav-item')[0].classList.add('active');
            } else if (page === 'favourites') {
                document.querySelectorAll('.bottom-nav-item')[1].classList.add('active');
            } else if (page === 'profile') {
                document.querySelectorAll('.bottom-nav-item')[2].classList.add('active');
            }

            // Hide all page sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected page
            const pageElement = document.getElementById(page + 'Page');
            if (pageElement) {
                pageElement.classList.add('active');
            }

            // Load content for specific pages
            if (page === 'favourites') {
                loadFavourites();
            }
        }

        // Load content into grid
        function loadContent() {
            const grid = document.getElementById('contentGrid');
            let data = contentData[currentMainTab][currentSection];

            grid.innerHTML = data.map(item => createContentItem(item)).join('');
        }

        // Create content item HTML
        function createContentItem(item) {
            const isLiked = favourites.findIndex(favItem => favItem.id === item.id) !== -1;
            const likeIcon = isLiked ? '❤️' : '🖤';

            return `
                
                    
                     
                    
                    
                        
                            ${item.title}
                            
                                 ${item.year}
                                ⭐ ${item.rating}
                            
                        
                    
                
            `;
        }

        // Show content details
        function showContentDetails(contentId) {
            currentContent = allContent.find(item => item.id === contentId);

            if (currentContent) {
                document.getElementById('contentDetailsTitle').textContent = currentContent.title;

                // Yil va reyting ma'lumotlarini joylash
                document.getElementById('contentDetailsInfo').textContent = `${currentContent.year} | ⭐ ${currentContent.rating}`;

                // Janrlarni joylash
                document.getElementById('contentDetailsGenre').textContent = `Janrlar: ${currentContent.genres.join(', ')}`;

                // Ta'rifni joylash
                document.getElementById('contentDetailsDescription').textContent = currentContent.description;

                // YouTube player manzilini yangilash
                const videoUrl = currentContent.videoUrl;
                const youtubeIframe = document.getElementById('youtubeIframe');

                // YouTube havolasini to'g'ri formatlash
                if (videoUrl && videoUrl.includes("youtube.com/embed/")) {
                    youtubeIframe.src = videoUrl;
                } else if (videoUrl && videoUrl.includes("youtube.com")) {
                    // Agar havola "youtube.com" bo'lsa, "embed" formatiga o'tkazish
                    const videoId = videoUrl.split("v=")[1];
                    youtubeIframe.src = `https://www.youtube.com/embed/${videoId}`;
                } else if (videoUrl && videoUrl.includes("youtu.be")) {
                    // Agar havola "youtu.be" bo'lsa, video ID olish
                    const videoId = videoUrl.split("youtu.be/")[1].split("?")[0];
                    youtubeIframe.src = `https://www.youtube.com/embed/${videoId}`;
                } else {
                    // Agar havola noto'g'ri bo'lsa, xabar berish
                    youtubeIframe.src = "";
                    console.error("Noto'g'ri YouTube havola:", videoUrl);
                }

                // Like iconni yangilash
                updateLikeIcon();

                showModal('contentDetailsModal');
            }
        }

        // Toggle like
        function toggleLike() {
            if (currentContent) {
                const index = favourites.findIndex(item => item.id === currentContent.id);
                if (index === -1) {
                    // Qo'shish
                    favourites.push(currentContent);
                    showNotification('Sevimlilarga qo\'shildi!');
                } else {
                    // O'chirish
                    favourites.splice(index, 1);
                    showNotification('Sevimlilardan olib tashlandi!');
                }

                // LocalStorage yangilash
                localStorage.setItem('favourites', JSON.stringify(favourites));

                // Like iconni yangilash
                updateLikeIcon();

                // Sevimlilar sahifasini yangilash
                loadFavourites();
            }
        }

        // Like iconni yangilash
        function updateLikeIcon() {
            const likeIconElement = document.getElementById('likeIcon');
            const isLiked = favourites.findIndex(item => item.id === currentContent.id) !== -1;
            likeIconElement.textContent = isLiked ? '❤️' : '🖤';
        }

        // Watch content
        function watchContent() {
            // Keyinroq funksiyani qo'shamiz
            alert('Watch funksiyasi keyinroq qo\'shiladi!');
        }

        // Load favourites
        function loadFavourites() {
            const favouritesGrid = document.getElementById('favouritesGrid');
            favouritesGrid.innerHTML = favourites.map(item => createContentItem(item)).join('');
        }

        // Show modal
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

          // Qora rejimni yoqish/o'chirish
        function toggleDarkMode() {
            var theme = localStorage.getItem('theme');
            if (theme === "dark") {
                theme = "light";
            } else {
                theme = "dark";
            }
            localStorage.setItem('theme', theme);
            document.body.setAttribute('data-theme', theme);
            }
        function loadAppIcon() {
            const iconUrl = localStorage.getItem('appIcon');
            if (iconUrl) {
                setAppIcon(iconUrl);
            } else {
                // Agar icon saqlanmagan bo'lsa, default iconni yuklash
                uploadDefaultIcon();
            }
        }

       // Default iconni yuklash
        function uploadDefaultIcon() {
            const defaultIconUrl = 'https://i.ibb.co/h1BBhdh5/App-icon-for-Sun-Set.png'; // Default icon manzili
            uploadImageToImgbb(defaultIconUrl)
                .then(response => {
                    if (response.success) {
                        const uploadedIconUrl = response.data.url;
                        setAppIcon(uploadedIconUrl);
                        localStorage.setItem('appIcon', uploadedIconUrl);
                    } else {
                        console.error('Default iconni yuklashda xatolik:', response.error);
                    }
                });
        }

        // Rasmni ImgBB ga yuklash
        function uploadImageToImgbb(image) {
            const formData = new FormData();
            formData.append('image', image);
            formData.append('key', imgbbApiKey);

            return fetch('https://api.imgbb.com/1/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .catch(error => {
                console.error('Rasmni yuklashda xatolik:', error);
                return { success: false, error: error };
            });
        }

         // Ilovani iconni o'rnatish
        function setAppIcon(iconUrl) {
            const headerLogoImg = document.querySelector('.header-logo img');
            const profileLogoImg = document.querySelector('.profile-header .profile-logo');

            if (headerLogoImg) headerLogoImg.src = iconUrl;
            if (profileLogoImg) profileLogoImg.src = iconUrl;
        }
        // Add theme to LocalStorage
        if (localStorage.getItem('theme') === "dark")
            document.body.setAttribute('data-theme', 'dark');
            
         //Telegram 
            const tg = window.Telegram.WebApp;
            tg.ready()
            tg.expand();

            //Set data
            tg.data = {
            user: tg.initDataUnsafe.user,
            theme: tg.themeParams
        };

        //Change theme
        tg.themeData = function() {
            const {themeParams} = this;
            document.body.style.backgroundColor = themeParams.bg_color;
            document.body.style.color = themeParams.text_color;
         };
            tg.themeData();

    </script>
</body>

</html>
    
        